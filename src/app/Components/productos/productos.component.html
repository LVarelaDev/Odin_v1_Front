<div class="container">
    <div class="row">
        <div id="content-wrapper" class="d-flex flex-column">
        </div>
        <div class="row mt-12">
            <div class="col-lg-12" *ngIf="true">
                <div class="card shadow">
                    <div class="card-body text-center">
                        <div class="card-body text-center">
                            <div class="row">
                                <div class="col-4">
                                </div>
                                <div class="col-4">
                                    <h3>{{ accion }} conductor </h3>
                                </div>
                                <div class="col-4">
                                    <div class="btns">
                                        <button mat-raised-button matTooltip="Reiniciar formulario"
                                            (click)="ResetForm()" class="btn btn-warning">
                                            <i class="fa-solid fa-rotate"></i>
                                        </button>
                                    </div>
                                </div>
                                <hr>
                            </div>
                            <form [formGroup]="form" (ngSubmit)="agregarConductor()">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-address-card"
                                                    [class.green-icon]="this.form.get('tipoDocumento')?.valid"
                                                    [class.red-icon]="this.form.get('tipoDocumento')?.invalid && this.form.get('tipoDocumento')?.touched"></i>
                                            </span>
                                            <select class="form-select" aria-label="Tipo documento"
                                                formControlName="tipoDocumento">
                                                <option value="" selected [disabled]="true">Seleccionar...</option>
                                                <option value="1">CEDULA</option>
                                                <option value="2">CEDULA EXTRANGERA</option>
                                                <option value="3">NIT</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-address-card"
                                                    [class.green-icon]="this.form.get('documento')?.valid"
                                                    [class.red-icon]="this.form.get('documento')?.invalid && this.form.get('documento')?.touched"></i>
                                            </span>
                                            <input formControlName="documento" type="text" class="form-control"
                                                [maxlength]="10" placeholder="Documento">
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-user"
                                                    [class.green-icon]="this.form.get('nombre')?.valid"
                                                    [class.red-icon]="this.form.get('nombre')?.invalid && this.form.get('nombre')?.touched"></i>
                                            </span>
                                            <input formControlName="nombre" type="text" class="form-control"
                                                placeholder="Nombre Completo">
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-phone"
                                                    [class.green-icon]="this.form.get('celular')?.valid"
                                                    [class.red-icon]="this.form.get('celular')?.invalid && this.form.get('celular')?.touched"></i>
                                            </span>
                                            <input formControlName="celular" type="text" class="form-control"
                                                [maxlength]="15" mask="(000) 000-0000" placeholder="Celular">
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-calendar-days"
                                                    [class.green-icon]="this.form.get('fechaNacimiento')?.valid"
                                                    [class.red-icon]="this.form.get('fechaNacimiento')?.invalid && this.form.get('fechaNacimiento')?.touched"></i>
                                            </span>
                                            <input formControlName="fechaNacimiento" type="date" class="form-control"
                                                placeholder="Fecha Nacimiento">
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-envelope"
                                                    [class.green-icon]="this.form.get('correo')?.valid"
                                                    [class.red-icon]="this.form.get('correo')?.invalid && this.form.get('correo')?.touched"></i>
                                            </span>
                                            <input formControlName="correo" type="email" class="form-control"
                                                placeholder="Correo">
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-id-badge"
                                                    [class.green-icon]="this.form.get('tipoLicencia')?.valid"
                                                    [class.red-icon]="this.form.get('tipoLicencia')?.invalid && this.form.get('tipoLicencia')?.touched"></i>
                                            </span>
                                            <input formControlName="tipoLicencia" type="text" class="form-control"
                                                placeholder="Tipo Licencia">
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa-solid fa-hashtag"
                                                    [class.green-icon]="this.form.get('numeroPazYSalvo')?.valid"
                                                    [class.red-icon]="this.form.get('numeroPazYSalvo')?.invalid && this.form.get('numeroPazYSalvo')?.touched"></i>
                                            </span>
                                            <input formControlName="numeroPazYSalvo" type="text" class="form-control"
                                                placeholder="Numero Paz y Salvo">
                                        </div>
                                    </div>
                                    <div class="grid d-grid gap-2">
                                        <button *ngIf="!isEdit" [disabled]="this.form.invalid" type="submit"
                                            class="btn btn-success">
                                            <i class="fa-solid fa-database"></i> Guardar
                                        </button>
                                        <button *ngIf="isEdit" [disabled]="this.form.invalid" type="submit"
                                            class="btn btn-success">
                                            <i class="fa-solid fa-database"></i> Actualizar
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                            </div>
                            <div class="col-md-4 mb-3">
                                <h3 class="mt-3">Listado de Conductores</h3>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="input-group mt-3">
                                    <input #buscar type="text" class="form-control" placeholder="Buscar"
                                        (input)="buscarConductor($event)" [(ngModel)]="valorInput">
                                    <span (click)="limpiar(buscar.value)" class="search input-group-text">
                                        <i
                                            [ngClass]="buscar.value != '' ? 'fa-solid fa-xmark' : 'fa-solid fa-magnifying-glass'"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- 
                    <button (click)="exportToExcel()" class="btn btn-success btn-lg" *ngIf="false">
                        <i class="fa-sharp fa-solid fa-download"></i> Descargar
                    </button> -->
                        <div class="table table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="thead table-dark">
                                    <tr>
                                        <th class="align-middle">Documento</th>
                                        <th class="align-middle">No Documento</th>
                                        <th class="align-middle">Nombre</th>
                                        <th class="align-middle">Celular</th>
                                        <th class="align-middle">Fecha Nacimiento</th>
                                        <th class="align-middle">Correo</th>
                                        <th class="align-middle">Tipo Licencia</th>
                                        <th class="align-middle">No Paz y Salvo</th>
                                        <th class="align-middle">Estado</th>
                                        <th class="align-middle">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngIf="$listConductores.length <= 0">
                                        <td colspan="10">
                                            No hay registros...
                                        </td>
                                    </tr>
                                    <tr *ngFor="let conductor of $listConductores">
                                        <td>{{ conductor.idTipoDocumento == 1 ? "CC" : "CE" }}</td>
                                        <td>{{ conductor.documento }}</td>
                                        <td>{{ conductor.nombre }}</td>
                                        <td>{{ conductor.celular }}</td>
                                        <td>{{ conductor.fechaNacimiento | date :'dd-MM-YYYY' }}</td>
                                        <td>{{ conductor.correo }}</td>
                                        <td>{{ conductor.tipoLicencia }}</td>
                                        <td>{{ conductor.numeroPazYSalvo }}</td>
                                        <td *ngIf="conductor.estado === 'ACTIVO'"><span
                                                class="badge text-bg-success">{{conductor.estado}}</span></td>
                                        <td *ngIf="conductor.estado === 'INACTIVO'"><span
                                                class="badge text-bg-danger">{{conductor.estado}}</span></td>
                                        <td *ngIf="conductor.estado === 'INCOMPLETO'"><span mat-raised-button
                                                matTooltip="Documentos Incompletos"
                                                class="badge text-bg-warning">{{conductor.estado}}</span></td>
                                        <td>
                                            <i (click)="setValue(conductor)" mat-raised-button
                                                matTooltip="Editar información"
                                                class="far fa-solid fa-pen-to-square text-primary"></i>&nbsp;
                                            <i (click)="openDialogDocumentos(conductor.id)" mat-raised-button
                                                matTooltip="Gestion de documentos"
                                                class="far fa-regular fa-file text-warning"></i>&nbsp;
                                            <i mat-raised-button matTooltip="Eliminar conductor"
                                                class="far fa-solid fa-delete-left text-danger"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>